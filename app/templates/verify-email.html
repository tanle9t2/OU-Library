<!DOCTYPE html>
<html>

<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.css"
          crossorigin="anonymous"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="keywords" content="html, html5, web, css, js">
    <meta name="description" content="GPHUCDEPZAI">
    <meta http-equiv="refresh" content="1800">
    <link href="https://cdn0.fahasa.com/media/favicon/default/favicon4.ico" rel="shortcut icon">
    <title>Đăng kí</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <script src="wow.min.js"></script>
</head>

<body>
<div class="main-wrapper login-body">
    <div>
        <div class="row">
            <div class="login-wrap">
                <div class="login-sec">
                    <div>
                        <img src="https://res.cloudinary.com/duk7gxwvc/image/upload/v1732125348/385-3855617_click-here-for-flyer-kids-reading-reading-week-removebg-preview_asryy5.png"
                             alt="Login Image">
                    </div>
                </div>
            </div>
            <div class="login-wrap-bg">
                <div class="login-wrapper">
                    <div class="loginbox">
                        <div class="login-right">
                            <div class="login-right-wrap">
                                <div class="account-logo row">
                                    <a href="javascript:;">
                                        <img class="img1"
                                             src="https://cdn0.fahasa.com/skin/frontend/ma_vanese/fahasa/images/fahasa-logo.png"
                                             alt="">
                                    </a>
                                </div>
                                <h2 style="color: #5a5a5a;">Xác nhận email</h2>
                                <form class="row" method="post" action="{{ url_for('account.verify_email') }}" id="verificationForm">
                                    <!-- Email -->
                                    <div class="form-group-2 appoinment-body-1" style="width: 102%;">
                                        <div class="form-group appoinment-body-1">
                                            <label for="email">
                                                <font>Email</font>
                                                <span style="color: red;">*</span>
                                            </label>
                                        </div>
                                        <div>
                                            <input class="form-control-all form-control-ten-sdt-checkpass" type="email"
                                                   id="email" name="email" value="{{ email }}" required>
                                        </div>
                                    </div>

                                    <!-- Verification Code -->
                                    <div class="form-group-1 appoinment-body-1">
                                        <div class="form-group appoinment-body-1">
                                            <label for="verify">
                                                <font>Mã xác nhận</font>
                                                <span style="color: red;">*</span>
                                            </label>
                                        </div>
                                        <div>
                                            <input class="form-control-all form-control-ten-sdt-checkpass" type="text"
                                                   id="verify" name="verification_code">
                                        </div>
                                    </div>

                                    <!-- Buttons -->
                                    <div class="form-group-1" style="width:23%">
                                        <div class="form-group appoinment-body-1">
                                            <label>
                                                <font></font>
                                            </label>
                                        </div>
                                        <div class="box">
                                            <button class="btn-primary" type="submit" name="action" value="send_code" id="sendCodeBtn">
                                                Gửi mã
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-group-2" style="width:23%">
                                        <div class="form-group appoinment-body-1">
                                            <label>
                                                <font></font>
                                            </label>
                                        </div>
                                        <div class="box">
                                            <button class="btn-primary" type="submit" name="action" value="resend_code" id="resendCodeBtn">
                                                Gửi lại
                                            </button>
                                        </div>
                                    </div>
                                    <div class="container-checkpass">
                                        {% if err_msg %}
                                        <div class="checkpass" style="margin-bottom: 15px">
                                            <div class="remember-me">
                                                <label class="custom_check">
                                                    <font style="color: red; font-weight: 600;">{{err_msg}}</font>
                                                    <span class="checkmark"></span>
                                                </label>
                                            </div>
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="form-group login-btn" style="margin-top:15px;">
                                        <div class="box">
                                            <button class="btn-primary" type="submit" name="action" value="confirm">Xác
                                                nhận
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function () {-->
<!--        const sendCodeBtn = document.getElementById('sendCodeBtn');-->
<!--        const resendCodeBtn = document.getElementById('resendCodeBtn');-->
<!--        const confirmBtn = document.getElementById('confirmBtn');-->
<!--        const errMsg = document.getElementById('errMsg');-->

<!--        // Hàm gửi yêu cầu AJAX-->
<!--        function sendAjax(action) {-->
<!--            const email = document.getElementById('email').value;-->
<!--            const verificationCode = document.getElementById('verify').value;-->

<!--            fetch('/verify', {-->
<!--                method: 'POST',-->
<!--                headers: {-->
<!--                    'Content-Type': 'application/json',-->
<!--                },-->
<!--                body: JSON.stringify({-->
<!--                    action: action,-->
<!--                    email: email,-->
<!--                    verification_code: verificationCode,-->
<!--                }),-->
<!--            })-->
<!--                .then(response => response.json())-->
<!--                .then(data => {-->
<!--                if (data.error) {-->
<!--                    errMsg.textContent = data.error;-->
<!--                } else if (data.redirect) {-->
<!--                    window.location.href = data.redirect;-->
<!--                } else {-->
<!--                    errMsg.textContent = data.message;-->
<!--                }-->
<!--            })-->
<!--                .catch(err => {-->
<!--                console.error('Error:', err);-->
<!--                errMsg.textContent = 'Đã xảy ra lỗi. Vui lòng thử lại.';-->
<!--            });-->
<!--        }-->

<!--        // Gắn sự kiện vào các nút-->
<!--        sendCodeBtn.addEventListener('click', () => sendAjax('send_code'));-->
<!--        resendCodeBtn.addEventListener('click', () => sendAjax('resend_code'));-->
<!--        confirmBtn.addEventListener('click', () => sendAjax('confirm'));-->
<!--    });-->

<!--</script>-->

</body>
</html>